rate=1/24

sleep=(n)->
	now=time()
	stop=now+n*1000
	while now<stop
		now=time()

class Sprt
	new:(i,a,x,y,sc,w,h)=>
		@i=i
		@a=a
		@x=x
		@y=y
		@sc=sc
		@fl=0
		@rt=0
		@w=w
		@h=h
		@fr=0
		@atk=false
	gx:=>return @x
	gy:=>return @y
	l:=>@x-=1
	r:=>@x+=1
	u:=>@y-=1
	d:=>@y+=1
	mv:(nx,ny)=>
		@x=nx
		@y=ny
	sp:(n)=>@s=n
	flip:=>@fl=not @fl
	rot:=>@rt=not @rt
	attack:=>
		@fr=1
		@atk=true
	ga:=>return @atk
	draw:=>
		if @atk
			spr @a[@fr],@x,@y,14,@sc,@fl,@rt,@w,@h
			@fr+=1
			if @fr==#@a
				@atk=false
				@fr=0
		else
			spr @i[@fr+1],@x,@y,14,@sc,@fl,@rt,@w,@h
			@fr=(@fr+1)%#@i

p=Sprt({256,256,257,257},{258,258,259,259,260,260},40,40,1,1,1)

export TIC=->
	if splash!
		sleep rate
		cls 0
		if btn 0 then p\u!
		if btn 1 then p\d!
		if btn 2 then p\l!
		if btn 3 then p\r!
		if btn 4 then p\attack!
		if btn 5
			print "b pressed",120,68,3
		p\draw!
-- <TILES>
-- 001:0000000000000000000000000000000000000000000000000003333000303303
-- 002:0000000000000033000003330000333000033300003330000033000003300000
-- 003:0000000000000000000003000000033000000030000000000000030000000330
-- 004:0000000000000000000000000000000000000000000000003000030033300333
-- 005:0000000000000000003000000033000000030000000000000030030000330333
-- 006:0000000000000000003000000033000000330000033333003333300300330033
-- 007:0000000000000000000030000000330000000300000000003300300033303300
-- 017:0033033300333300003300000033000000333003000333300000000000000000
-- 018:0300003300003333003333000000000000333300000033330000003300000000
-- 019:3300033000000330000003300000033000000330000000303300000000000000
-- 020:3333033333030330330003303300033033000330030000300000000000000000
-- 021:3033033330330330003303300033033000330330000300300000000000000000
-- 022:3033000030330000303300033033030330333303300330000000000000000000
-- 023:0330330033003300300033000000330033303300330003000000000000000000
-- </TILES>

-- <SPRITES>
-- 000:0003300000033000003333000303303030033003000330000030030000300300
-- 001:0000000000033000000330000033330003033030300330030030030000300300
-- 002:0003300300033030003333000303300030033000000330000030030000300300
-- 003:0003300000033003003333300303300030033000000330000030030000300300
-- 004:0003300000033000003333300303300330033000000330000030030000300300
-- </SPRITES>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:000000555555aaaaaaffffff0000aa5555ff00aa0055ff5500aaaa55ffffaa0000ff5555aa00aaff55ffaa5500ffff55
-- </PALETTE>

